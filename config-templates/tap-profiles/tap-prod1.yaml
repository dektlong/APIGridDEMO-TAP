#@ load("@ytt:data", "data")
---
#@ if data.values.private_registry.ecr:
#@   ecr_iam_arn = "arn:aws:iam::{}:role".format(data.values.clouds.aws.accountID)
#@ end

profile: run
shared:
  ingress_domain: #@ "{}.{}".format(data.values.dns.prod1SubDomain, data.values.dns.domain)
  ingress_issuer: #@ data.values.tap.ingressIssuer
cnrs:
  domain_template: '{{.Name}}.{{.Domain}}'
contour:
  envoy:
    service:
      type: LoadBalancer

#@ if data.values.private_registry.ecr:
cartographer:
  aws_iam_role_arn: #@ ecr_iam_arn
source_controller:
  aws_iam_role_arn: #@ ecr_iam_arn
namespace_provisioner:
  aws_iam_role_arn: #@ ecr_iam_arn
#@ end

excluded_packages:
  - learningcenter.tanzu.vmware.com
  - workshops.learningcenter.tanzu.vmware.com
  - eventing.tanzu.vmware.com
  - tap-telemetry.tanzu.vmware.com
ceip_policy_disclosed: true
