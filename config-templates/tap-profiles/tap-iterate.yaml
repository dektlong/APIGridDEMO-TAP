#@ load("@ytt:data", "data")
---
profile: iterate
shared:
  ingress_domain: #@ "{}.{}".format(data.values.dns.devSubDomain, data.values.dns.domain)
  ingress_issuer: #@ data.values.tap.ingressIssuer
  image_registry:
    project_path: #@ "{}/{}".format(data.values.private_registry.host, data.values.private_registry.repo)
    username: #@ data.values.private_registry.username
    password: #@ data.values.private_registry.password
supply_chain: testing

namespace_provisioner:
  controller: true
  additional_sources:
    - git:
        ref: origin/main
        subPath: resources
        url: https://github.com/dektlong/dekt-gitops.git
      path: _ytt_lib/resources
cnrs:
  domain_template: '{{.Name}}.{{.Domain}}'
contour:
  envoy:
    service:
      type: LoadBalancer
appliveview_connector:
  activateSensitiveOperations: true
  backend:
    host: #@ "{}.{}.{}".format("appliveview", data.values.dns.sysSubDomain, data.values.dns.domain)
    ingressEnabled: true
    caCertData: |- 
      UPDATED_IN_RUNTIME
api_auto_registration:
  tap_gui_url: #@ "{}.{}.{}".format("https://tap-gui", data.values.dns.sysSubDomain, data.values.dns.domain)
excluded_packages:
  - learningcenter.tanzu.vmware.com
  - workshops.learningcenter.tanzu.vmware.com
  - tap-telemetry.tanzu.vmware.com
ceip_policy_disclosed: true
